all:myapp

#使用的默认编译器
CC = gcc

#在哪儿安装
INSTDIR = /usr/local/bin

#引入的头文件的位置
INCLUDE = .

#开发配置参数
CFLAGS = -g -Wall -anis

myapp:main.o 2.o 3.o
	$(CC) -o myapp main.o 2.o 3.o
main.o:main.c a.h
	$(CC) -I$(INCLUDE) $(CFLAGS) -c main.c
2.o:2.c a.h b.h
	$(CC) -I$(INCLUDE) $(CFLAGS) -c 2.c
3.o:3.c b.h c.h
	$(CC) -I$(INCLUDE) $(CFLAGS) -c 3.c

#清除.o的文件
clean:
	-rm main.o 2.o 3.o
#安装
install:myapp
	@if [-d $(INSTDIR)]; \
		then \
		cp myapp $(INSTDIR); \
		chmod a+x $(INSTDIR)/myapp; \
		chmod og-w $(INSTDIR)/myapp; \
		echo "Installed in $(INSTDIR)"; \
	else \
		echo "Sorry,$(INSTDIR) does not exits" \
	fi

#在这个例子里面，我们在makefile文件中增加一个clean选项
#来删除不需要的目标文件
#增加一个install选项来将编译成功的应用程序安装到另一个目录中去
