#这个例子里面，我们就试着用make管理函数库
#一般函数库就是文件，通常是以.a为后缀的

all:myapp

#使用的编译器
CC = gcc

#安装的位置
INSTDIR = /user/local/bin

#引入的头文件的位置
INCLUDE = .

#配置参数
CFLAGS = -g -Wall -ansi

#默认的函数库名称
MYLIB = mylib.a

#编译的时候使用函数库
myapp:main.o $(MYLIB)
	$(CC) -o myapp main.o $(MYLIB)

$(MYLIB):$(MYLIB)(2.o) $(MYLIB)(3.o)
main.o:main.c a.h
2.o:2.c a.h b.h
3.o:3.c b.h c.h

clean:
	-rm main.o 2.o 3.o $(MYLIB)
install:myapp
	@if [-d $(INSTDIR)]; \
		then \
		cp myapp $(INSTDIR); \
		chmod a+x $(INSTDIR)/myapp; \
		chmod og-w $(INSTDIR)/myapp; \
		echo "Installed in $(INSTDIR)"; \
	else \
		echo "Sorry ,$(INSTDIR) does not exist"; \
	fi


